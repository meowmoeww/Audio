## Fourier 변환의 직관을 해석하는 방법

### Intuition

- 푸리에 변환이란 복합적인 소리 신호를 구성하고 있는 개별적인 주파수들로 나누는 과정을 설명한다. 이를 통해 각 주파수가 소리에 어떤 기여를 하는지, 어떤 특징을 가지는지 파악할 수 있다.

### From time to frequency domain

시간 도메인에서 주파수 도메인으로 변형하기 위해서는 fourier transform이 필요하다. 

우측 그래프에서 어떠한 주파수의 값이 크게 나타나는 것은, 해 주파수가 원본 사운드의 중요한 구성 요소라는 의미이다. 

![image](https://github.com/meowmoeww/Audio/assets/89447043/03d645cd-df8a-476d-83d5-9c05f0161fcd)

### Deeper intution

- **다양한 주파수의 사인파와 신호 비교**: 푸리에 변환은 시간 도메인에 있는 신호를 주파수 도메인으로 변환하여 분석하는 방법이며 이 과정에서, 원래 신호와 다양한 주파수를 가진 사인파들과 비교한다.
- **각 주파수에 대해 크기와 위상을 얻음**: 신호를 각각의 사인파와 비교할 때, 각 주파수에 대해 하나의 크기(진폭)와 위상(각도)을 얻게 된다. 이는 그 주파수의 사인파가 원래 신호와 얼마나 일치하는지를 나타 낸다
- **높은 magnitude는 신호와 사인파 사이의 높은 유사성을 가짐**: 푸리에 변환에서 얻은 크기가 크다는 것은 원래 신호와 해당 주파수의 사인파가 유사하다는 것을 의미한다다. 이는 신호에 해당 주파수 성분이 강하게 존재한다.

### Sine wave

![image](https://github.com/meowmoeww/Audio/assets/89447043/9514e63d-75b4-4d49-b492-f68ca5b856e5)

사인 함수(sin) 안에 있는 2π 는 한 주기를 나타내며, f는 주파수를, t는 시간을, 그리고 ϕ는 위상을 의미한다. 전체적으로 이 식은 시간에 따른 사인파의 변화를 나타낸다.

주파수 f가 클수록 사인파는 더 빠르게 진동하고, 위상 ϕ는 사인파가 시간 축을 따라 얼마나 이동하였는지를 나타낸다.

- 위상이란 

![image](https://github.com/meowmoeww/Audio/assets/89447043/3f8c3e96-ceee-49bd-8424-6c7474b2cd7a)

위의 사진은 주파수 523에 대해 위상이 0인 그래프이다. 

![image](https://github.com/meowmoeww/Audio/assets/89447043/c1179c64-62fe-4b94-bb75-497a26f60964)

phase를 0에서 0.2로 변화시키게 된다면, 그래프는 빨간색 그래프에서 노랑색 그래프로 이동하게 된다. 

![image](https://github.com/meowmoeww/Audio/assets/89447043/bd145b24-8e55-417c-975f-63d593f0acf2)

위상이 0에서 0.5로 가게 되면 빨간색 그래프는 더 옆으로 이동하게 되고 



위상이 1이 되면 다시 겹치게 된다. 

### Fourier transform : Step by step

![image](https://github.com/meowmoeww/Audio/assets/89447043/5bfba3b9-f434-4b30-9450-6301c1df9a6e)


1. 주파수 선택(Choose a frequency): 분석할 신호와 비교할 특정 주파수를 선택한다. 이 주파수는 신호에 포함된 주파수 성분을 찾기 위한 기준점 역할을 한다.
   
2. 위상 최적화(Optimise phase): 선택한 주파수에 대해 원본 신호와 가장 잘 일치하도록 위상을 조절다. 이는 원본 신호가 가진 위상과 동일한 위상을 찾는 과정이다.

(각 주파수마다 최적화된 위상을 찾는 이유는, 원본 신호가 단일한 위상 값을 가지지 않기 때문이다. 복잡한 신호는 여러 주파수 성분이 서로 다른 위상과 진폭을 가지고 결합하여 만들어진 결과물이기 때문에 각각의 주파수 성분이 신호에 어떻게 기여하고 있는지 이해하려면,  각 주파수에 대해 독립적으로 최적화된 위상 값을 찾아야 한다.)

3. 크기 계산(Calculate magnitude): 최적화된 위상을 갖는 주파수와 신호와의 유사성 정도를 나타내는 크기(또는 진폭)를 계산한다.

   (계산하는 방법은 두개의 신호를 곱했을 때 양의 값이 나온다면 양의영역, 음의 값이 나온다면 음의 영역이라고 한다. 두 신호에 대해 양의 면적에서 음의 면적을 빼면 magnitude를 구할 수 있다. 이 값이 클수록 해당 주파수 성분이 원본 신호에서 더 중요하거나 강한 부분을 나타낸다. 

1~3은 하나의 주파수에 대한 계산하는 단계이기 때문에, 실제 연구에서는 가능한 모든 주파수에 대해 이 작업을 수행해야 한다.

### Fourier transform

위의 step by step을 시도해볼 수 있는 식이다.  

1. 선택된 주파수가 신호가 가장 잘 일치하는 위상을 찾기

1-1). 선택된 주파수에 대해서 사인파를 만들어준다. 

![image](https://github.com/meowmoeww/Audio/assets/89447043/13f52476-ffb5-45eb-8604-1307faea70b1)

1-2) 원본 신호와 사인파 두개의 곱에 대해 영역의 크기를 구한다. (이 값에 대해서 적분을 하는데 이는 양의 영역에서 음의 영역을 뺀 값과 동일하다) 

![image](https://github.com/meowmoeww/Audio/assets/89447043/bfe04abe-8d5b-4452-97f2-3b5c14c6708a)

1-3) 0~ 1 사이의 위상의 값에 대하여 magnitude의 값을 최대로 하는 위상의 값을 선택한다. 

![image](https://github.com/meowmoeww/Audio/assets/89447043/8c75cf6f-2036-4815-ad0a-d782c71102a3)

2. 선택된 주파수와 magnitude값을 최대로 하는 위상의 값을 사용하여 해당 사인파가 원본 신호와 얼마나 유사한지 수치화 한다. 

![image](https://github.com/meowmoeww/Audio/assets/89447043/269f03ae-2f10-469e-9867-1f84e5650550)

원본 신호와 사인파 두개의 곱에 대해 영역의 크기를 구한다. (이 값에 대해서 적분을 하는데 이는 양의 영역에서 음의 영역을 뺀 값과 동일하다)

### Reconstructing a signal ( 주파수 영역에서 시간 영역으로 신호를 재구성한다)

- 여러 개의 사인파를 서로 중첩하여 복잡한 신호를 만든다
- 각 사인파의 중요도에 따라 상대적인 크기(진폭)로 가중치를 주어 합산한다.
- 각 사인파의 원본 신호에 대한 상대적인 위상을 고려하여 신호를 재구성한다
- 원본 신호를 푸리에 변환하여 주파수 영역으로 변환하더라도, 변환된 주파수 영역에서도 원본 신호에 대한 정보가 보존되어 있기 때문에 다시 원본 신호로 재구성할 수 있다
