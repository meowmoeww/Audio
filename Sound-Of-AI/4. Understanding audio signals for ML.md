### Audio signal

오디오 신호란 소리의 가능한 표현으로 우리가 소리를 재생하는데 필요한 모든 정보를 인코딩 한다. 

### houston we have a problem
![image](https://github.com/meowmoeww/Audio/assets/89447043/e37f1026-94fe-4aab-8979-c40c840abfb8)

소리가 본질적으로 아날로그인 기계적 파동 이지만 이를 디지털 기술로 처리하고 싶다는 것이다.

예를 들어 컴퓨터로 아날로그 신호를 디지털 신호로 잘 변환할 수 있는 방법이 오늘 영상의 주제이다.

### Analog signal

아날로그 신호란 시간과 진폭에 따른 연속적인 값이다.
![image](https://github.com/meowmoeww/Audio/assets/89447043/ef73c2c7-7ca2-45c7-961a-fdd482d041bc)

보시다시피 아날로그 신호의 곡선은 연속적이며 이를 저장하기 위해서는 무한한 메모리가 필요하다는 단점이 존재하므로, 디지털 형식으로 저장해야한다. 

### Digital signal

디지털 신호는 이산적인 값들의 연속이다. 이는 연속된 신호에 서로 다른 스냅샷을 찍는 것과 같으며 데이터 포인트는 유한한 수의 값만 가질 수 있다.

### Analog to digital conversion

아날로그에서 디지털 신호로 이동하는 방법은 샘플링 , 양자화 방법이다.

### Sampling sound
![image](https://github.com/meowmoeww/Audio/assets/89447043/82bd1f92-dc10-44e9-87f2-214f0f3b7b1b)

연속적인 파형이 존재할 때, 원하는 지점에 샘플 포인트를 찍을 수 있다. 샘플링 레이는 샘플링 간의 간격인 T를 결정하고, 해당 간격으로 샘플을 찍을 수 있다. 

### Locating samples
![image](https://github.com/meowmoeww/Audio/assets/89447043/714fe9fb-3145-4809-a4fd-3e05c35965a9)

샘플 간의 간격인 T와, 몇번 째 샘플인지에 대한 번호 n이 존재한다면 해당 지점에서의 샘플의 위치를 계산할 수 있다. 

### Sampling rate
![image](https://github.com/meowmoeww/Audio/assets/89447043/48ee91b3-59c8-4210-879a-def2997cc64f)

샘플링 레이트는 주기의 역수이다. 샘플링 레이트는 기본적으로 주파수이고 헤르츠 단위로 측정된다. 이는 디지털 신호가 매초마다 가지고 있는 샘플 수의 종류를 나타낸다.

![image](https://github.com/meowmoeww/Audio/assets/89447043/afe4b646-55af-4873-9cd4-c650d77ffaa4)


낮은 샘플링 속도에서의 수직막대는 일부 샘플에 대한 표현을 나타내며 높은 샘플링 속도의 수직막대보다 넓다. 같은 그래프내의 수직막대가 넓다는 것은 샘플링 개수가 작다는 것과 같고 이는 샘플간의 간격이 더 크고, 기간의 역수인 샘플링 속도가 작다는 것을 의미한다. 

낮은 샘플링 속도에서는 연속 곡선과 수직막대로 표시되는 영역 사이에 차이가 있다는 것이다.

이러한 차이를 샘플링 오류라 한다. 샘플링 오류는 샘플링을 적용할 때 손실되는 정보의 양과 같다.

당연히 낮은 샘플링 속도를 사용할 때 샘플링의 오류가 더 높다.

### why sampling rate = 44100hz?

우리가 물어볼 수 있는 흥미로운 질문은 왜 특정 샘플링 속도가 있는지이다.

### Nyquist frequency
![image](https://github.com/meowmoeww/Audio/assets/89447043/4acaae18-2a75-4478-9b52-a37dfa6d013b)

그에 대한 해답은 Nyquist frequency에서 알아볼 수 있다.

나이퀴스트 주파수는 샘플링 속도의 절반으로 정의되며 이 개념은 아날로그 신호를 디지털화할 때 생기는 제약을 설명해준다.

나이퀴스트 주파수는 샘플링 이론에 따라서, 디지털로 변환된 신호가 원래의 아날로그 신호를 올바르게 재구성하기 위해서는 샘플링 주파수가 신호의 최고 주파수의 두 배 이상이어야 한다는 원리이다.

![image](https://github.com/meowmoeww/Audio/assets/89447043/832c16a7-c37b-45bb-b9aa-56faf2feaca1)

사진으로 설명을 하자면, 위의 첫번째 그래프는 주파수가 1인 그래프이고, 아래의 그래프는 주파수가 2인 그래프이다. 

첫 번째 그래프를 디지털로 저장하기 위해서는 샘플을 수가 최소 2개가 존재해야 한다, 따라서 나이퀴스트 주파수는 2이다. 

두 번째 그래프를 디지털로 저장하기 위해서는 샘플의 수가 최소 4개가 존재해야 한다. 따라서 나이퀴스트 주파수는 4이다. 

따라서 나이퀴스트 주파수를 넘어간 주파수 영역에 대해서는 디지털 신호로 재구성이 어렵다. 

만약 넘어가게 된다면 alisaing 현상이 발생하여 원래의 신호와 다른 artifact가 생길 수 있다. 이러한 artifact는 신호를 왜곡시키고 오류를 유발할 수 있기 때문에 주의해야 한다. 

### Nyquist frequency for CD
![image](https://github.com/meowmoeww/Audio/assets/89447043/2b5563a9-424c-4139-99e3-022154bdbbdf)

CD의 샘플링 주파수가 44100 Hz인 경우 나이퀴스트 주파수를 계산하면 22050 Hz이다.

이는 디지털 신호를 재구성하기 위한 최대 주파수 제한이다. 이 값은 CD에서 재생 가능한 최고 주파수를 나타내며 이를 넘어서는 영역에 대해서는 재생이 보장되지 않으며 오디오 신호가 왜곡되거나 비정상적인 소리가 발생될 수 있다. 

22050 Hz는 인간의 청력 범위보다 약간 높은 주파수에 해당합니다. 인간의 청력은 보통 20 Hz에서 20 kHz까지인데, CD의 최대 주파수인 22050 Hz는 인간의 청력 범위를 넘어가기 때문에 기본적으로 CD에서는 artifact를 얻지 않고도 전체 주파수 범위를 감상할 수 있습니다. 따라서 CD에서는 특별한 artifact 없이 음악이나 오디오를 정확하게 재생할 수 있습니다.

### Aliasing

앨리어싱은 샘플링 과정에서 발생할 수 있는 현상으로  샘플링 속도가 신호에 포함된 가장 높은 주파수의 두 배보다 낮을 경우 발생할 수 있다. 

원래 신호에 없던 추가적인 주파수 성분이 생기는 현상으로 오디오 신호의 왜곡으로 들리 수 있다. 


![image](https://github.com/meowmoeww/Audio/assets/89447043/967c3174-bd1e-439a-9bad-fe4bdbda9759)

빨간색은 파형이며 검은 점과 같은 일부 샘플을 채취했다.

파란색 곡선은 샘플을통한 디지털 곡선의 재구성이다. 파란색 신호는 주파수가 훨씬 낮기 때문에 제대로 재구성 되지 않게 된다.


### Quantization

양자화는 아날로그 오디오 신호를 디지털 데이터로 변환하는 과정에서, 연속적인 아날로그 신호를 일련의 이산적인 값으로 변환하는 과정을 의미한다. 

• 해상도(Resolution) = 비트 수(num. of bits)

해상도는 양자화 과정에서 사용되는 비트 수를 의미한다. 

• 비트 깊이(Bit Depth)

오디오 샘플 하나를 표현하는 데 사용되는 비트 수를 나타낸다 

• CD 해상도 = 16비트

CD(Compact Disc) 오디오의 표준 해상도는 16비트이다

### Memroy for 1’ of sound

다음과 같은 값이 주어졌을 때 1분 길이의 소리를 저장하는데 필요한 메모리를 계산해보자 

• 샘플링 속도: 44,100Hz (초당 44,100개의 샘플)

• 비트 깊이: 16비트 (각 샘플이 16비트로 표현됨)

![image](https://github.com/meowmoeww/Audio/assets/89447043/1bcfcaa5-b932-4158-b657-688f5b886732)

1. 샘플링 속도와 비트 깊이를 곱하여 초당 데이터 양을 비트 단위로 계산한다.
2. 그 결과를 8로 나누어 비트를 바이트 단위로 변환한다.
3. 그 다음에 1,048,576으로 나누어 바이트를 메가바이트 단위로 변환한다.
4. 마지막으로, 60을 곱하여 초 단위를 분 단위로 변환한다.

계산 결과, 1분 길이의 오디오 파일은 약 5.49MB의 메모리를 차지한다. 이 계산은 모노(Mono) 채널을 기준으로 하고 있으며, 스테레오(Stereo) 오디오의 경우 두 배의 메모리가 필요하다

### Dynamic range

• 시스템이 기록할 수 있는 가장 큰 신호와 가장 작은 신호 사이의 차이 

다이내믹 레인지가 넓은 오디오 시스템은 매우 조용한 소리부터 매우 큰 소리까지 정확하게 녹음하고 재생할 수 있으며, 다이내믹 레인지가 좁은 시스템은 소리의 뉘앙스를 세밀하게 재현하는 데 한계가 있을 수 있다.

![image](https://github.com/meowmoeww/Audio/assets/89447043/c2c2ae24-36b3-4664-a9bf-3da4211c5fac)

•  **해상도(resolution)**: 디지털 오디오에서 신호의 세부 정보를 얼마나 정밀하게 측정하고 표현할 수 있는지를 나타내는 척도이다.  보통 비트 깊이(bit depth)로 표현되며, 비트 깊이가 높을수록 더 세밀한 해상도를 가지게 된다. 

•  **다이내믹 레인지(dynamic range)**:   다이내믹 레인지가 넓을수록, 시스템은 더 조용한 소리부터 더 큰 소리까지 잘 재현할 수 있다.

### Signal-to-quantization-noise ratio (SQNR)

•  최대 신호 강도와 양자화 오류 간의 관계: 오디오 신호가 디지털 형식으로 변환될 때 발생하는 최대 신호의 강도와 이 과정에서 발생할 수 있는 오류 사이의 비율이다. 

•  다이내믹 레인지와의 상관 관계: SQNR은 오디오 시스템의 다이내믹 레인지와 직접적으로 관련이 있다. 다이내믹 레인지가 넓을수록, 양자화 잡음 비율이 높아지며, 이는 더 좋은 오디오 품질이 된다.

![image](https://github.com/meowmoeww/Audio/assets/89447043/2a613214-8237-4fe7-bb85-8a24d2704159)

16비트의 오디오는 이론적으로 약 96dB의 다이내믹 레인지를 제공할 수 있다. 이는 양자화 오류로 인한 잡음과 최대 신호 강도 사이의 비율로 계산되며, 오디오 품질을 평가하는 데 중요한 지표 중 하나이다.
